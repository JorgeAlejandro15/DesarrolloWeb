{% extends "base.html" %}
 {% load static %} 

{% block body %} 

<div class="container py-3">  
    <div class="row">
        <div class="col-sm-12 col-md-8 col-lg-8 text-center mx-auto" >
             <h3>Listado de Productos</h3>
            <!--{% for pr in productos %}
            {% if forloop.first %}
            <h4>Proveedor: <b>{{pr.proveedor.nombre}}</b> </h4> 
            {% endif %}
            {% endfor %} -->
            <div class="table-responsive">
                <table id="datatable" class="table table-striped table-hover table-bordered border-dark table-sm">
                    
                    <thead class="table-success">
                        <tr>
                            <th class="centered">#</th>
                            <th class="centered"> Producto</th> 
                            <th class="centered"> Precio</th> 
                            <th class="centered"> Cantidad</th> 
                            <th class="centered"> Categor√≠a</th> 
                            <th class="centered"> Imagen</th> 
                            <th class="centered">Opciones</th> 
                                                    
                        </tr>
                    </thead>
                        <tbody id="tablebody">    
                            {% for p in object_list %}                         
                                <tr>
                                    <td>{{forloop.counter}}</td>                                 
                                    <td> {{ p.nombre }} </td>                                                                                                                                                                                                          
                                    <td> {{ p.precio }} </td>                                                                                                                                                                                                          
                                    <td> {{ p.cantidad_productos }} </td>                                                                                                                                                                                                          
                                    <td> {{ p.get_categoria_display}} </td>                                                                                                                                                                                                           
                                    <td class="contenido"> <img class="imagenes" src="{{ p.imagen.url}}" alt="" width="43" height="43"> </td>                                                                                                                                                                                                          
                                    <td>
                                        <a href="/update_producto/{{p.id}}" class="btn btn-info btn-sm bi bi-pencil" title="Editar">
                                            </a> 
                                        <a href="/delete_producto/{{p.id}}" class="btn btn-danger btn-sm btnEliminacion2 bi bi-trash" title="Eliminar"> </a>                         
                                    </td> 
                                </tr>
                            {% endfor %} 
                        </tbody>                 
                    </table>
                </div>
          </div>
      </div>
    </div>
    <br><br>
   
{% endblock %}  

{% block extrajs %}
        {% if messages %}
        {% for m in messages %}
        {% if m.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
        <script>
            Swal.fire({
            "icon": 'success', 
            "background": '#e1e6d3',  
            "title": 'Felicitaciones', 
            "text": '{{m}}'          
        })
        </script> 
        {% endif %}  
        {% if m.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
        <script>
            Swal.fire({
            "icon": 'error', 
            "background": '#e1e6d3',  
            "title": 'Error', 
            "text": '{{m}}'          
        })
        </script> 
        {% endif %} 
        {% endfor %}
        {% endif %}
{% endblock %}
